"use strict";function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var a=r[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var Grammar=require("./Grammar"),URI=require("./URI");module.exports=function(){function n(e,r,t){if(_classCallCheck(this,n),!(e&&e instanceof URI))throw new TypeError('missing or invalid "uri" parameter');for(var a in this._uri=e,this._parameters={},this.display_name=r,t)Object.prototype.hasOwnProperty.call(t,a)&&this.setParam(a,t[a])}return _createClass(n,null,[{key:"parse",value:function(e){return-1!==(e=Grammar.parse(e,"Name_Addr_Header"))?e:void 0}}]),_createClass(n,[{key:"setParam",value:function(e,r){e&&(this._parameters[e.toLowerCase()]=null==r?null:r.toString())}},{key:"getParam",value:function(e){if(e)return this._parameters[e.toLowerCase()]}},{key:"hasParam",value:function(e){if(e)return!!this._parameters.hasOwnProperty(e.toLowerCase())}},{key:"deleteParam",value:function(e){if(e=e.toLowerCase(),this._parameters.hasOwnProperty(e)){var r=this._parameters[e];return delete this._parameters[e],r}}},{key:"clearParams",value:function(){this._parameters={}}},{key:"clone",value:function(){return new n(this._uri.clone(),this._display_name,JSON.parse(JSON.stringify(this._parameters)))}},{key:"_quote",value:function(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}},{key:"toString",value:function(){var e=this._display_name?'"'.concat(this._quote(this._display_name),'" '):"";for(var r in e+="<".concat(this._uri.toString(),">"),this._parameters)Object.prototype.hasOwnProperty.call(this._parameters,r)&&(e+=";".concat(r),null!==this._parameters[r]&&(e+="=".concat(this._parameters[r])));return e}},{key:"uri",get:function(){return this._uri}},{key:"display_name",get:function(){return this._display_name},set:function(e){this._display_name=0===e?"0":e}}]),n}();